(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{403:function(s,a,t){"use strict";t.r(a);var e=t(26),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("ul",[t("li",[s._v("介绍 3m 是什么，如何一步步安装")]),s._v(" "),t("li",[s._v("在 "),t("strong",[s._v("mac")]),s._v(" 环境下如何安装，遇到的坑")])]),s._v(" "),t("h2",{attrs:{id:"安装nvm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nvm"}},[s._v("#")]),s._v(" 安装nvm")]),s._v(" "),t("p",[s._v("node版本管理工具，用于开发阶段，解决node多版本共存、切换、测试问题")]),s._v(" "),t("h3",{attrs:{id:"前置条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[s._v("#")]),s._v(" 前置条件")]),s._v(" "),t("ul",[t("li",[s._v("安装git")])]),s._v(" "),t("h3",{attrs:{id:"开始安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始安装"}},[s._v("#")]),s._v(" 开始安装")]),s._v(" "),t("ol",[t("li",[s._v("首先打开终端，进入当前用户的 "),t("code",[s._v("home")]),s._v(" 目录中")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("然后使用 ls -a 显示这个目录下的所有文件（夹）（包含隐藏文件及文件夹），查看有没有 .bash_profile 或.zshrc文件。")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -a\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("如果没有，则新建一个，zsh是macos下的命令行工具")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" ~/.zshrc\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("如果有或者新建完成后，我们通过官方的说明在终端中运行下面命令中的一种进行安装，安装完成后，配置会自动写入.zshrc文件")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("nvm命令被安装在 bash_profile 中，使用 source 命令，是系统环境变量生效")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.zshrc\n")])])]),t("ol",{attrs:{start:"6"}},[t("li",[s._v("执行nvm --version查看版本号")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nvm --version\n")])])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("查看可以安装的node版本")])]),s._v(" "),t("ul",[t("li",[s._v("LTS版本：稳定版本，一般为偶数版本号")]),s._v(" "),t("li",[s._v("Current版本：尝鲜版本，一般为奇数版本号")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nvm ls-remote\n")])])]),t("h2",{attrs:{id:"安装node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装node"}},[s._v("#")]),s._v(" 安装node")]),s._v(" "),t("ol",[t("li",[s._v("如选择 14.4.0 版本 node")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("arch -x86_64 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zsh")]),s._v("\n\nnvm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.4")]),s._v(".0\n")])])]),t("p",[t("strong",[s._v("特别注意！")])]),s._v(" "),t("p",[s._v("对于m1芯片的macOS，都需要使用Rosetta2安装node，否则这一步会报错，安装失败，详见："),t("a",{attrs:{href:"https://github.com/nvm-sh/nvm/issues/2350#issuecomment-734132550",target:"_blank",rel:"noopener noreferrer"}},[s._v("nvm install node fails to install on macOS Big Sur M1 Chip"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:"/backend/node/2021-04-21-02-11-44.png",alt:"解决方案"}})]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("查看安装位置")])]),s._v(" "),t("p",[s._v("通过 nvm 安装的 node 位于用户目录下，而非系统目录下。在 npm 安装全局模块的时候，可以避免操作系统超级用户授权问题。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" node\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /Users/zbw/.nvm/versions/node/v14.4.0/bin/node")]),s._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("指定默认node版本，如：指定14.4.0为默认版本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nvm "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" default "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.4")]),s._v(".0 \n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("列出本机所有node版本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nvm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("切换版本，如：使用14.4.0版本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nvm use "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.4")]),s._v(".0\n")])])]),t("h2",{attrs:{id:"安装npm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装npm"}},[s._v("#")]),s._v(" 安装npm")]),s._v(" "),t("p",[s._v("伴随 node 自动安装成功。用于安装各种 node 依赖包。")]),s._v(" "),t("h2",{attrs:{id:"安装nrm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nrm"}},[s._v("#")]),s._v(" 安装nrm")]),s._v(" "),t("p",[s._v("解决npm镜像访问慢的问题，提供测试，切换镜像源功能")]),s._v(" "),t("p",[t("code",[s._v("npm install -g nrm")])]),s._v(" "),t("h2",{attrs:{id:"速查表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#速查表"}},[s._v("#")]),s._v(" 速查表")]),s._v(" "),t("h3",{attrs:{id:"npm-yarn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-yarn"}},[s._v("#")]),s._v(" npm & yarn")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看 npm 可用源")]),s._v("\nnrm ls\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看 npm 当前源")]),s._v("\nnpm config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" registry\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 npm 源，优先级 3 > 2 > 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" npm config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" registry https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("registry.npm.taobao.org")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" nrm use https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("registry.npm.taobao.org")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" 设置 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npmrc 文件，registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("registry.npm.taobao.org")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加源")]),s._v("\nnrm add bnpm http"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("bnpm.byted.org")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查看 yarn 当前源")]),s._v("\nyarn config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" registry  \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置 yarn 源")]),s._v("\nyarn config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" registry https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("registry.npm.taobao.org")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("  \n")])])]),t("h3",{attrs:{id:"重新安装全局-node-模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重新安装全局-node-模块"}},[s._v("#")]),s._v(" 重新安装全局 node 模块")]),s._v(" "),t("p",[s._v("比如全局安装 gulp-cli 模块之后又重新安装一个新的 node 版本，那么此时的 gulp 命令是无法使用的，唯一能做的就是重新安装全局模块。针对这种情况，nvm 提供了一个很贴心的一键安装全局模块的 "),t("code",[s._v("nvm reinstall-packages")]),s._v(" 命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("nvm reinstall-packages "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.4")]),s._v(".0\n")])])]),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/nvm-sh/nvm#profile_snippet",target:"_blank",rel:"noopener noreferrer"}},[s._v("nvm"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000017391932",target:"_blank",rel:"noopener noreferrer"}},[s._v("在 Mac 下安装 nvm 管理 node（解决版）"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/93516955",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何在mac上卸载nvm并重新安装"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/nvm-sh/nvm/issues/2350#issuecomment-734132550",target:"_blank",rel:"noopener noreferrer"}},[s._v("nvm install node fails to install on macOS Big Sur M1 Chip"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/35856841",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm，yarn如何查看源和换源"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);