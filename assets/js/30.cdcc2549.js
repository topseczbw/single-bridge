(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{392:function(t,a,s){"use strict";s.r(a);var r=s(26),v=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"模块的基本要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块的基本要求"}},[t._v("#")]),t._v(" 模块的基本要求")]),t._v(" "),s("ol",[s("li",[t._v("隐藏模块内部实现")]),t._v(" "),s("li",[t._v("对外定义模块的访问接口，通过接口可以调用模块功能")])]),t._v(" "),s("h2",{attrs:{id:"模块接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块接口"}},[t._v("#")]),t._v(" 模块接口")]),t._v(" "),s("p",[t._v("模块接口通常包含一组变量和函数，创建接口最简单的方式是使用js对象")]),t._v(" "),s("h2",{attrs:{id:"四种模块方式实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四种模块方式实现"}},[t._v("#")]),t._v(" 四种模块方式实现")]),t._v(" "),s("p",[t._v("目标：实现一个util模块，外部可以调用模块的add工具方法")]),t._v(" "),s("h3",{attrs:{id:"函数模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数模块"}},[t._v("#")]),t._v(" 函数模块")]),t._v(" "),s("p",[t._v("使用自执行的匿名函数（IIFE）实现隐藏内部实现要求")]),t._v(" "),s("p",[t._v("使用闭包、对象实现对外定义模块的访问接口要求")]),t._v(" "),s("p",[t._v("扩展时，需要调用一个IIFE，改函数接收需要扩展的模块变量作为参数")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/33987402/77244442-ca45a700-6c4f-11ea-8540-d3decaae9290.png",alt:"image"}})]),t._v(" "),s("p",[t._v("函数模块缺点")]),t._v(" "),s("ol",[s("li",[t._v("通过模块扩展无法共享模块的私有变量")]),t._v(" "),s("li",[t._v("当我们开始创建模块化应用时，模块本身尝尝依赖其他模块的功能，然而函数模块模块无法实现这些依赖关系")])]),t._v(" "),s("h3",{attrs:{id:"amd-和-commonjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#amd-和-commonjs"}},[t._v("#")]),t._v(" AMD 和 CommonJs")]),t._v(" "),s("p",[t._v("为了弥补函数模块的缺点，AMD 与 CommonJs两大"),s("strong",[t._v("标准")]),t._v("产生，并相互竞争。")]),t._v(" "),s("h4",{attrs:{id:"amd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#amd"}},[t._v("#")]),t._v(" AMD")]),t._v(" "),s("ol",[s("li",[t._v("ADM最流行的实现是"),s("strong",[t._v("RequireJs")])]),t._v(" "),s("li",[t._v("设计理念是明确基于浏览器")]),t._v(" "),s("li",[t._v("自动处理依赖，无需考虑模块引入问题")]),t._v(" "),s("li",[t._v("异步加载依赖模块，避免阻塞 （解决前端应用场景中向服务器请求依赖模块文件问题）")]),t._v(" "),s("li",[t._v("所有依赖模块加载完毕后，调用模块的工厂函数，并传入依赖模块")]),t._v(" "),s("li",[t._v("在同一个文件中可以定义多个模块")]),t._v(" "),s("li",[t._v("对外提供模块访问接口的实现方式与函数模块一致")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/33987402/77243884-0f66da80-6c4a-11ea-973c-945f9bf5890b.png",alt:"AMD模块"}})]),t._v(" "),s("h4",{attrs:{id:"commonjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commonjs"}},[t._v("#")]),t._v(" CommonJs")]),t._v(" "),s("ol",[s("li",[t._v("每个文件，只能定义一个模块")]),t._v(" "),s("li",[t._v("module.exports 作为模块的公共接口")]),t._v(" "),s("li",[t._v("可以引入依赖模块，依赖同步加载 （由于服务器端常读磁盘文件，速度较快，与http请求速度不在同一个量级，所以使用同步加载）")]),t._v(" "),s("li",[t._v("变量可以定义在文件的顶部，虽然是顶部，但仍属于模块内部的局部变量")]),t._v(" "),s("li",[t._v("nodeJs 默认的模块标准")])]),t._v(" "),s("p",[t._v("CommonJs缺点")]),t._v(" "),s("p",[t._v("不显式的支持浏览器")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/33987402/77244455-d9c4f000-6c4f-11ea-8179-ebafe718dcae.png",alt:"image"}})]),t._v(" "),s("h3",{attrs:{id:"umd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#umd"}},[t._v("#")]),t._v(" UMD")]),t._v(" "),s("p",[t._v("在模块规范百家争鸣下，为实现统一的模块化标准，UMD产生了。")]),t._v(" "),s("p",[t._v("实现原理")]),t._v(" "),s("p",[t._v("先判断运行环境是否支持cjs，然后判断是否支持amd，如果都不支持，则使用函数模块方式（IIFE），生成一个全局变量。")]),t._v(" "),s("h3",{attrs:{id:"es6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es6"}},[t._v("#")]),t._v(" ES6")]),t._v(" "),s("p",[t._v("主要思想：必须显式的使用标识符导出模块，才能从外部访问模块")]),t._v(" "),s("p",[t._v("虽然变量可以定义在模块顶部，但是仍然只能在模块内部访问变量")]),t._v(" "),s("p",[t._v("目前浏览器尚未支持ES6模块，如果现在需要ES6模块，需要对代码进行编译，可以使用Traceur 或 babel 或 typescript")]),t._v(" "),s("h4",{attrs:{id:"导出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导出"}},[t._v("#")]),t._v(" 导出")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("代码")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("export const add = (a, b) => a + b")]),t._v(" "),s("td",[t._v("导出变量")])]),t._v(" "),s("tr",[s("td",[t._v("export function add (a, b) { return a + b}")]),t._v(" "),s("td",[t._v("导出函数")])]),t._v(" "),s("tr",[s("td",[t._v("export class add {}")]),t._v(" "),s("td",[t._v("导出类")])]),t._v(" "),s("tr",[s("td",[t._v("export default class add {}")]),t._v(" "),s("td",[t._v("导出默认类")])]),t._v(" "),s("tr",[s("td",[t._v("export default function() {}")]),t._v(" "),s("td",[t._v("导出默认函数")])]),t._v(" "),s("tr",[s("td",[t._v("export default add")]),t._v(" "),s("td",[t._v("导出默认对象")])]),t._v(" "),s("tr",[s("td",[t._v("export { add, delete }")]),t._v(" "),s("td",[t._v("导出存在的变量  命名导出")])]),t._v(" "),s("tr",[s("td",[t._v("export { add as add1 }")]),t._v(" "),s("td",[t._v("使用别名导出变量")])]),t._v(" "),s("tr",[s("td",[t._v("export default function () {} export { add }")]),t._v(" "),s("td",[t._v("同时使用默认导出和命名导出")])])])]),t._v(" "),s("h4",{attrs:{id:"导入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导入"}},[t._v("#")]),t._v(" 导入")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("代码")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("import add from './add'")]),t._v(" "),s("td",[t._v("导入默认导出")])]),t._v(" "),s("tr",[s("td",[t._v("import { add } from './add'")]),t._v(" "),s("td",[t._v("导入命名导出")])]),t._v(" "),s("tr",[s("td",[t._v("import * as all from './add'")]),t._v(" "),s("td",[t._v("导入模块中声明的全部导出")])]),t._v(" "),s("tr",[s("td",[t._v("import add, { add } from './add'")]),t._v(" "),s("td",[t._v("同时导入默认导出和命名导出")])]),t._v(" "),s("tr",[s("td",[t._v("import { add as add1 } from './add'")]),t._v(" "),s("td",[t._v("通过别名导入模块中声明的全部导出，到本模块依赖两个不同模块内容，并且依赖内容命名一致时使用")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/33987402/77244463-e2b5c180-6c4f-11ea-8aad-bf96807bea6d.png",alt:"image"}})]),t._v(" "),s("h4",{attrs:{id:"主文件进行模块管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主文件进行模块管理"}},[t._v("#")]),t._v(" 主文件进行模块管理")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// util/index.js   作为中间层导出")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'shared/util'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lang'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./env'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./options'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./debug'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./props'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./error'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./next-tick'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineReactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../observer/index'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a.js  作为使用方调用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" toArray "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./util/index.js'")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=v.exports}}]);