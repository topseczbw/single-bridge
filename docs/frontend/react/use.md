---
title: react 使用
---

## 概念

### 声明式与命令式

声明式与命令式都属于编程范式。

### 什么是副作用

- ajax 请求数据，格式化数据
- 定时器
- 异步
- 设置 or 取消 事件订阅
- 手动操作 dom

## 使用 hooks

### useRef

#### 是什么

- useRef 可以认为是组件中的一个变量，不随组件的 update 变化
- 修改是同步的，与 state 不同，修改后可以即时拿到最新的值
- 不会触发响应式操作，如：作为 useMemo 的依赖，触发计算更新

#### 解决什么问题

有时候我们需要一些变量存储数据，并且这些数据与视图的渲染没有直接关系，如果使用 state，修改时会重新出发组件 update，这并不是我们希望的，这是会用到 useRef。

#### 使用场景

- 作为定时器的唯一标识
- 作为初始化数据的备份，用于在退出时作对比，进行二次确认
- 获取 dom

### 自定义 hook

#### 是什么

- 是一个命名使用 `use` 开头的函数
- 在函数内部可以使用 react hooks，如：useMemo，**可传入必要参数返回给调用方组件渲染视图需要的数据和事件函数**
- 封装可复用的处理状态的逻辑，自定义 hook 对外暴露渲染视图需要的状态，调用方去用就好，如果需要修改，自定义 hook 会暴露方法，调用方只管调用，不必关心状态细节：怎么来的，如何修改的。

我暴露给你 渲染用的状态   你就去用   如果需要修改   我暴露给你方法    你直接调   你不需要关心   状态怎么来的  也不需要关心状态怎么改的

#### 使用场景

react 官方建议 **声明式** 编码，组件只关心：**用状态渲染视图**，至于一些 **副作用** 代码、包括状态是怎么来的，如何格式化，渲染什么样的视图，用户交互会触发什么事件如何更新状态，这部分的逻辑都可以封装在一个自定义 hook 当中。

- ajax 请求数据，format，返回给调用方组件使用
- 封装各种基本数据类型状态，如：Boolean，对外暴露 open close 即可
- 封装业务层面的逻辑，如埋点上报、前端监控、获取登录状态等

## react 插件

### @loadable/component

代码分割，实现组件懒加载，多用于路由加载

[地址](https://loadable-components.com/)

### react-window

解决虚拟滚动问题，antd 官方使用

[地址](https://loadable-components.com/)